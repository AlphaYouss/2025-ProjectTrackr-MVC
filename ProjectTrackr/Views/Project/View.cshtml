@model ProjectTrackr.Models.Project

@{
    ViewData["Title"] = "View";
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Project details</h1>

    <a class="btn btn-primary" asp-controller="Task" asp-action="Create" asp-route-id="@Model.id">
        <i class="bi bi-plus-circle"></i> Create Task
    </a>
</div>

<div>
    <h4>Project</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">ID</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.id)</dd>

        <dt class="col-sm-2">Name</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.name)</dd>

        <dt class="col-sm-2">Description</dt>
        @if (!string.IsNullOrEmpty(Model.description))
        {
            <dd class="col-sm-10">@Html.DisplayFor(model => model.description)</dd>
        }
        else
        {
            <dd class="col-sm-10">-</dd>
        }

        <dt class="col-sm-2">Created at</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.createdAt)</dd>

        <dt class="col-sm-2">Owner</dt>
        <dd class="col-sm-10">@Html.DisplayFor(model => model.ownerId)</dd>
    </dl>
</div>

<hr />

<div>
    <h4>Tasks</h4>
    @if (Model.tasks != null && Model.tasks.Any())
    {
        <ul class="list-group" style="max-height: 350px; overflow-y: auto;">
            @foreach (TaskItem task in Model.tasks)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <strong>@task.title</strong>
                        <br />
                        Status: <span class="badge bg-info text-dark">@task.status</span>
                        <br />
                        Created: @task.createdAt
                    </div>
                    <div>
                        <a class="btn btn-sm btn-outline-primary me-1"
                           asp-controller="Task"
                           asp-action="View"
                           asp-route-id="@task.id">
                            View
                        </a>
                        <a class="btn btn-sm btn-outline-secondary"
                           asp-controller="Task"
                           asp-action="Edit"
                           asp-route-id="@task.id">
                            Edit
                        </a>
                    </div>
                </li>
            }
        </ul>
    }
    else
    {
        <p>No tasks for this project.</p>
    }
</div>

<hr />

<div>
    <h4>Activity Logs</h4>
    <h5>Latest 5 activity logs</h5>
    @if (Model.activityLogs != null && Model.activityLogs.Any())
    {
        <ul class="list-group">
            @foreach (ActivityLog log in Model.activityLogs)
            {
                <li class="list-group-item">
                    @log.action
                    <br />
                    At: @log.createdAt
                </li>
            }
        </ul>
    }
    else
    {
        <p>No activity logs for this project.</p>
    }
</div>